import n,{useRef as e,useState as t,useEffect as o,forwardRef as r,useImperativeHandle as l}from"react";import{HtmlUtils as i}from"@delpi/common";import c from"perfect-scrollbar";var a=function(){return a=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},a.apply(this,arguments)};function u(n,e,t,o){return new(t||(t=Promise))(function(r,l){function i(n){try{a(o.next(n))}catch(n){l(n)}}function c(n){try{a(o.throw(n))}catch(n){l(n)}}function a(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(i,c)}a((o=o.apply(n,e||[])).next())})}function s(n,e){var t,o,r,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(a){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(l=0)),l;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,o=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){l=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){l.label=c[1];break}if(6===c[0]&&l.label<r[1]){l.label=r[1],r=c;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(c);break}r[2]&&l.ops.pop(),l.trys.pop();continue}c=e.call(n,l)}catch(n){c=[6,n],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}"function"==typeof SuppressedError&&SuppressedError;var d=function(n,e,t,o){if(void 0===o&&(o=.95),!e.raf){var r=function(){var l=e.vx,i=e.vy;if(Math.abs(l)<.1&&Math.abs(i)<.1)return e.raf=null,void(null==t||t.forEach(function(e){var t;return null===(t=e.onScrollStop)||void 0===t?void 0:t.call(e,n)}));n.scrollLeft+=Math.sign(l)*Math.min(Math.abs(l),50),n.scrollTop+=Math.sign(i)*Math.min(Math.abs(i),50),e.vx*=o,e.vy*=o,null==t||t.forEach(function(e){var t;return null===(t=e.onScroll)||void 0===t?void 0:t.call(e,n)}),e.raf=requestAnimationFrame(r)};null==t||t.forEach(function(e){var t;return null===(t=e.onScrollStart)||void 0===t?void 0:t.call(e,n)}),e.raf=requestAnimationFrame(r)}},v=new WeakMap,f=function(n){return.5-Math.cos(n*Math.PI)/2},h=function(n,e,t){if(void 0===t&&(t={}),n){var o=t.duration,r=void 0===o?300:o,l=t.easing,i=void 0===l?f:l;v.has(n)&&cancelAnimationFrame(v.get(n));var c=n.scrollTop,a=e-c,u=performance.now(),s=function(e){var t=e-u,o=Math.min(t/r,1);if(n.scrollTop=c+a*i(o),o<1){var l=requestAnimationFrame(s);v.set(n,l)}else v.delete(n)},d=requestAnimationFrame(s);v.set(n,d)}},p=function(n,e,t){if(void 0===t&&(t={}),n){var o=t.duration,r=void 0===o?300:o,l=t.easing,i=void 0===l?f:l;v.has(n)&&cancelAnimationFrame(v.get(n));var c=n.scrollLeft,a=e-c,u=performance.now(),s=function(e){var t=e-u,o=Math.min(t/r,1);if(n.scrollLeft=c+a*i(o),o<1){var l=requestAnimationFrame(s);v.set(n,l)}else v.delete(n)},d=requestAnimationFrame(s);v.set(n,d)}},m=function(n,e){for(var t=[],o=2;o<arguments.length;o++)t[o-2]=arguments[o];null==n||n.forEach(function(n){var o=n[e];o&&o.apply(void 0,t)})},y=function(n,e,t,o,r,l,i){void 0===r&&(r=!1),void 0===l&&(l=.95);var c=function(){var e;return null===(e=n.current)||void 0===e?void 0:e.element},a=null,u=function(){o&&(o.vx=0,o.vy=0)},s=function(n,a,s,v,f){void 0===s&&(s=null!=e?e:300),void 0===v&&(v=null!=t?t:function(n){return n}),void 0===f&&(f=!1);var y=c();y&&o&&(f?(void 0!==n&&(o.vx=n-y.scrollLeft),void 0!==a&&(o.vy=a-y.scrollTop)):u(),void 0!==n&&p(y,n,{duration:s,easing:v}),void 0!==a&&h(y,a,{duration:s,easing:v}),m(i,"onScroll",y),r&&f&&d(y,o,i,l),void 0!==a&&(a<=0&&m(i,"onReachTop"),a+y.clientHeight>=y.scrollHeight&&m(i,"onReachBottom"),a+y.clientHeight>=.9*y.scrollHeight&&m(i,"onReachThreshold",90)),void 0!==n&&(n<=0&&m(i,"onReachLeft"),n+y.clientWidth>=y.scrollWidth&&m(i,"onReachRight")))},v={update:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.update()},destroy:function(){var e;null===(e=n.current)||void 0===e||e.destroy(),m(i,"onDestroy"),a&&c()&&c().removeEventListener("scroll",a),u()},getScrollbar:function(){var e;return null!==(e=n.current)&&void 0!==e?e:null},getScrollElement:function(){var n;return null!==(n=c())&&void 0!==n?n:null},resetMomentum:u,scrollToX:function(n,e,t){return s(n,void 0,e,t)},scrollToY:function(n,e,t){return s(void 0,n,e,t)},scrollToTop:function(n,e){return s(void 0,0,n,e)},scrollToBottom:function(n,e){var t=c();t&&s(void 0,t.scrollHeight,n,e)},scrollToLeft:function(n,e){return s(0,void 0,n,e)},scrollToRight:function(n,e){var t=c();t&&s(t.scrollWidth,void 0,n,e)},scrollToIndex:function(n,e,t){var o=c();if(o){var r=o.children[n];r&&s(void 0,r.offsetTop,e,t)}},scrollToElement:function(n,e,t){c()&&n&&s(void 0,n.offsetTop,e,t)},scrollToPercent:function(n,o,r,l){void 0===r&&(r=null!=e?e:300),void 0===l&&(l=null!=t?t:function(n){return n});var i=c();if(i){var a=void 0!==n?(i.scrollHeight-i.clientHeight)*n:void 0,u=void 0!==o?(i.scrollWidth-i.clientWidth)*o:void 0;s(u,a,r,l)}}},f=c();return f&&(m(i,"onInit",v,f),a=function(){m(i,"onScroll",f)},f.addEventListener("scroll",a)),v},g={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"},b=function(n){var e=n.height,t=n.maxHeight,o=n.width,r=n.maxWidth,l=function(n){return void 0===n?void 0:"number"==typeof n?"".concat(n,"px"):n};return a(a(a(a({},e?{height:l(e)}:{}),t?{maxHeight:l(t)}:{}),o?{width:l(o)}:{}),r?{maxWidth:l(r)}:{})},S=function(n,e){var t={};return e?(Object.entries(g).forEach(function(o){var r=o[0],l=o[1],i=n[l];i&&(t[r]=function(n){return i(n)},e.addEventListener(r,t[r]))}),t):t},E=function(n,e){void 0===n&&(n={}),Object.entries(n).forEach(function(n){var t=n[0],o=n[1];e.removeEventListener(t,o)})},w=function(n,e,t){var o;if(!n.current)return{el:null};if(t){var r=n.current.querySelector("table"),l=null!==(o=null==r?void 0:r.querySelector("tbody"))&&void 0!==o?o:null;if(l)return Object.entries(e).forEach(function(n){var e=n[0],t=n[1];l.style[e]=t}),{table:null!=r?r:void 0,el:l}}return{el:n.current}},x=function(n,e){return Array.from(n).filter(function(n){return!e.includes(n)})},T=function(n){return void 0===n&&(n=[]),n.reduce(function(n,e){return n+e.clientHeight},0)},L=function(n,e,t){var o=(null!=t?t:i.findFirstLevel(n,e)).filter(i.isVisible);return o.length?o[o.length-1]:null};function A(n,r){var l,i=n.options,u=n.always,s=n.wheelStop,v=n.injectTable,f=n.effectData,p=n.autoScrollBottom,m=n.autoScrollToNewItem,g=n.preserveScroll,x=n.scrollSaveKey,T=n.disableKeyboard,L=n.scrollDuration,A=n.scrollEasing,H=n.plugins,M=void 0===H?[]:H,R=n.inertia,k=void 0===R||R,F=n.inertiaFriction,D=n.scrollLock,I=n.onScroll,q=n.onScrollStart,C=n.onScrollStop,O=n.onScrollDirectionChange,j=n.onUserScroll,z=n.onReachTop,N=n.onReachBottom,P=n.onReachLeft,Y=n.onReachRight,W=n.onReachStart,B=n.onReachEnd,U=n.onReachThreshold,X=function(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]])}return t}(n,["options","always","wheelStop","injectTable","effectData","autoScrollBottom","autoScrollToNewItem","preserveScroll","scrollSaveKey","disableKeyboard","scrollDuration","scrollEasing","plugins","inertia","inertiaFriction","scrollLock","onScroll","onScrollStart","onScrollStop","onScrollDirectionChange","onUserScroll","onReachTop","onReachBottom","onReachLeft","onReachRight","onReachStart","onReachEnd","onReachThreshold"]),K=e(null),G=e(null),J=e({x:0,y:0}),V=e(null),Q=e({x:0,y:0}),Z=e({vx:0,vy:0,raf:null}),$=e(null),_=t(!1),nn=_[0],en=_[1],tn=b(X),on=null!==(l=null==i?void 0:i.wheelPropagation)&&void 0!==l?l:s;return o(function(){if(G.current){var n=w(G,tn,v),e=n.table,t=n.el,o=a(a({},i||{}),{wheelPropagation:on});e&&(K.current=t,o.suppressScrollX=!0,e.classList.add("list-dk-scroll-view","perfect-table"),u&&(null==t||t.classList.add("scroll-always")),on&&(null==t||t.classList.add("scroll-wheel-stop"))),$.current=new c(t,o),D&&t&&(t.style.overflow="hidden");var l=S(X,t);if(x){var s=sessionStorage.getItem(x);if(s){var f=JSON.parse(s),h=f.x,m=f.y;t.scrollTop=m,t.scrollLeft=h}}g&&(t.scrollTop=J.current.y,t.scrollLeft=J.current.x),p&&(t.scrollTop=t.scrollHeight);var b=function(n){if(T){["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"," "].includes(n.key)&&n.preventDefault()}};T&&window.addEventListener("keydown",b);var H={x:0,y:0},R=function(n){var e=t,o=e.scrollLeft,r=e.scrollTop,l="wheel"===n.type||"touchmove"===n.type;null==I||I({x:o,y:r}),k&&l&&(Z.current.vx=o-Q.current.x,Z.current.vy=r-Q.current.y,d(e,Z.current,M,F)),q&&(V.current?clearTimeout(V.current):q()),C&&(V.current&&clearTimeout(V.current),V.current=window.setTimeout(function(){V.current=null,C()},150)),o-H.x===0&&r-H.y===0||!O||(O({x:o-H.x,y:r-H.y}),H={x:o,y:r}),null==j||j({x:o,y:r});var i=.9*e.scrollHeight;if(U&&r+e.clientHeight>=i&&U(90),N&&r+e.clientHeight>=e.scrollHeight&&N(),z&&r<=0&&z(),B&&r+e.clientHeight>=e.scrollHeight&&B(),W&&r<=0&&W(),Y&&o+e.clientWidth>=e.scrollWidth&&Y(),P&&o<=0&&P(),Q.current={x:o,y:r},k&&t){var c=Z.current,a=c.vx,u=c.vy;(Math.abs(a)>.1||Math.abs(u)>.1)&&requestAnimationFrame(function(){t.scrollLeft+=a,t.scrollTop+=u,Z.current.vx*=null!=F?F:.95,Z.current.vy*=null!=F?F:.95})}};t.addEventListener("scroll",R),r&&(r.current=y($,L,A,Z.current,k,F,M));var _=new ResizeObserver(function(){var n;return null===(n=$.current)||void 0===n?void 0:n.update()});return _.observe(t),window.addEventListener("resize",function(){var n;return null===(n=$.current)||void 0===n?void 0:n.update()}),function(){var n;if(g&&$.current){var e=$.current.element;J.current={x:e.scrollLeft,y:e.scrollTop}}E(l,t),t.removeEventListener("scroll",R),_.disconnect(),window.removeEventListener("resize",function(){var n;return null===(n=$.current)||void 0===n?void 0:n.update()}),T&&window.removeEventListener("keydown",b),null===(n=$.current)||void 0===n||n.destroy(),Z.current.raf&&cancelAnimationFrame(Z.current.raf)}}},[G.current,f]),o(function(){if($.current&&G.current){var n=$.current.element;$.current.update(),m&&h(n,n.scrollHeight,{duration:L,easing:A})}},[f,n.children]),{refsTarget:G,hovering:nn,setHovering:en,dimension:tn,getApi:function(){return y($,L,A,Z.current,k,F,M)},plugins:M}}var H=r(function(e,t){var o,r,c=A(e,t&&"function"!=typeof t?t:void 0),u=c.refsTarget,s=c.hovering,d=c.setHovering,v=c.dimension,f=c.getApi,h=c.plugins;l(t,f);var p=i.joinClass("list-dk-scroll-view","perfect-list",e.className,e.autoHide&&!s?"scroll-hidden":void 0),m=i.joinClass("scroll-content",{"scroll-always":e.always},{"scroll-wheel-stop":null!==(r=null===(o=e.options)||void 0===o?void 0:o.wheelPropagation)&&void 0!==r?r:e.wheelStop}),y=function(e){return null==h?void 0:h.map(function(t,o){var r;return(null!==(r=t.mountPosition)&&void 0!==r?r:"outside")===e&&t.render&&n.createElement("div",{key:o,className:"scrollbar-plugin ".concat(e)},t.render())})};return n.createElement("div",{id:e.id,className:p,style:a(a({},e.style),e.injectTable?{}:v),onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},y("before"),n.createElement("div",{ref:u,className:m},e.children,y("inside")),y("outside"))});H.displayName="Scrollbar";var M=function(n){var e=void 0===n?{}:n,t=e.distance,o=void 0===t?50:t,r=e.duration,l=void 0===r?300:r,i=e.borderColor,c=void 0===i?"#1890ff":i,a=e.borderWidth,u=void 0===a?2:a,s=e.borderDuration,d=void 0===s?300:s,v=null,f=null,h=0,p=!1,m=function(){if(v){h*=.8;var n=v.scrollHeight-v.clientHeight,e=h;v.scrollTop+h>n&&(e=n-v.scrollTop),v.scrollTop+h<0&&(e=-v.scrollTop),v.style.transform="translateY(".concat(e,"px)"),!p&&Math.abs(h)>0&&(v.style.border="".concat(u,"px solid ").concat(c),p=!0),Math.abs(h)>1?f=requestAnimationFrame(m):(v.style.transition="transform ".concat(l,"ms ease-out, border ").concat(d,"ms"),v.style.transform="translateY(0)",setTimeout(function(){v&&(v.style.transform="",v.style.transition="",v.style.border="",p=!1)},Math.max(l,d)),f=null,h=0)}};return{onInit:function(n,e){(v=e.firstElementChild)||console.warn("bounce plugin: wrapper not found")},onScroll:function(n){if(v){var e=n.scrollTop,t=v.scrollHeight,r=v.clientHeight,l=e-parseFloat(n.dataset.lastScroll||"0");e<=0&&l<0?h=Math.max(l,-o):e+r>=t&&l>0&&(h=Math.min(l,o)),0===h||f||m(),n.dataset.lastScroll=e.toString()}},onDestroy:function(){f&&cancelAnimationFrame(f),v&&(v.style.transform="",v.style.border=""),v=null,f=null,h=0,p=!1}}},R=function(n){var e=void 0===n?{}:n,t=e.distance,o=void 0===t?20:t,r=e.duration,l=void 0===r?300:r,i=null,c=null,a=0,u=function(n){if(i){var e=performance.now(),t=function(o){var r=Math.min((o-e)/l,1),a=Math.sin(r*Math.PI/2);i.style.transform="translateY(".concat(n*(1-a),"px)"),r<1?c=requestAnimationFrame(t):(i.style.transform="",c=null)};c=requestAnimationFrame(t)}};return{onInit:function(n,e){(i=e.firstElementChild)||console.warn("bounce plugin: wrapper not found"),a=e.scrollTop},onScroll:function(n){if(i){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight,l=e-a;e<=0&&l<0?u(o):e+r>=t&&l>0&&u(-o),a=e}},onDestroy:function(){c&&cancelAnimationFrame(c),i&&(i.style.transform=""),i=null,c=null}}},k=function(n){var e=void 0===n?{}:n,t=e.gradientSize,o=void 0===t?30:t,r=e.gradientColor,l=void 0===r?"rgba(0,0,0,0.1)":r,i=e.zIndex,c=void 0===i?1e3:i,a=null,u=null,s=null,d=null,v=function(){if(a&&u&&s){var n=a.scrollTop,e=a.scrollHeight,t=a.clientHeight;u.style.opacity=n>0?"1":"0";var r=e-(n+t);s.style.opacity=r>1?"1":"0",s.style.top="".concat(n+t-o,"px"),d=null}};return{onInit:function(n,e){(a=e).style.position&&"static"!==a.style.position||(a.style.position="relative"),u=e.querySelector("[data-gradient-top]"),s=e.querySelector("[data-gradient-bottom]"),u||((u=document.createElement("div")).setAttribute("data-gradient-top","true"),Object.assign(u.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"".concat(o,"px"),background:"linear-gradient(to bottom, ".concat(l,", transparent)"),pointerEvents:"none",transition:"opacity 0.3s",zIndex:c.toString()}),e.appendChild(u)),s||((s=document.createElement("div")).setAttribute("data-gradient-bottom","true"),Object.assign(s.style,{position:"absolute",left:"0",width:"100%",height:"".concat(o,"px"),background:"linear-gradient(to top, ".concat(l,", transparent)"),pointerEvents:"none",transition:"opacity 0.3s",zIndex:c.toString()}),e.appendChild(s)),v()},onScroll:function(){null===d&&(d=requestAnimationFrame(v))},onDestroy:function(){u&&u.remove(),s&&s.remove(),a=null,u=null,s=null,d&&cancelAnimationFrame(d),d=null}}},F=function(n){var e=void 0===n?{}:n,t=e.itemSelector,o=void 0===t?"li":t,r=e.highlightClass,l=void 0===r?"ps-scroll-highlight":r,i=null,c=null,a=null,u=function(){if(i){var n=i.scrollTop+i.clientHeight/2,e=Array.from(i.querySelectorAll(o));if(e.length){for(var t=e[0],r=Math.abs(e[0].offsetTop-n),a=0,u=e;a<u.length;a++){var s=u[a],d=Math.abs(s.offsetTop-n);d<r&&(r=d,t=s)}c&&c.classList.remove(l),t.classList.add(l),c=t}}};return{onInit:function(n,e){i=e,u()},onScroll:function(){a&&cancelAnimationFrame(a),a=requestAnimationFrame(u)},onDestroy:function(){c&&c.classList.remove(l),i=null,c=null,a&&cancelAnimationFrame(a),a=null}}},D=function(n){var e=void 0===n?{}:n,t=e.momentumRef,o=void 0===t?{vx:0,vy:0,raf:null}:t,r=e.friction,l=void 0===r?.95:r,i=null,c=function(n){o&&(Math.abs(o.vx)<.1&&Math.abs(o.vy)<.1?o.raf=null:(n.scrollLeft+=o.vx,n.scrollTop+=o.vy,o.vx*=l,o.vy*=l,o.raf=requestAnimationFrame(function(){return c(n)})))};return{onInit:function(n,e){o.raf||(i=requestAnimationFrame(function(){return c(e)}))},onScroll:function(n){var e,t,r=n.scrollLeft-(null!==(e=o.vx)&&void 0!==e?e:0),l=n.scrollTop-(null!==(t=o.vy)&&void 0!==t?t:0);o.vx=r,o.vy=l},onDestroy:function(){i&&cancelAnimationFrame(i)}}},I=function(e){var r=e.threshold,l=void 0===r?60:r,i=e.onLoadMore,c=e.onCompleted,a=e.loading,d=void 0===a?n.createElement(n.Fragment,null,"Loading..."):a,v=e.done,f=void 0===v?n.createElement(n.Fragment,null,"Done!"):v,h=e.completed,p=void 0===h?n.createElement(n.Fragment,null,"No more data"):h,m=e.doneDelay,y=void 0===m?1e3:m,g=e.lockWhileLoading,b=void 0!==g&&g,S=e.onError,E=null,w=!1,x=!1,T=null;function L(){var e=t("idle"),r=e[0],l=e[1];return o(function(){return T=l,function(){T=null}},[]),"loading"===r?n.createElement("div",{className:"ps-scrollbar-loadmore-loader"},d):"done"===r?n.createElement("div",{className:"ps-scrollbar-loadmore-done"},f):"completed"===r?n.createElement("div",{className:"ps-scrollbar-loadmore-completed"},p):null}return{mountPosition:"inside",render:function(){return n.createElement(L,null)},onInit:function(n,e){E=e},onScroll:function(){return u(this,void 0,void 0,function(){var n,e,t,o;return s(this,function(r){switch(r.label){case 0:if(!E||w||x)return[2];if(n=E.scrollTop,e=E.scrollHeight,t=E.clientHeight,!(l<1?n+t>=e*l:n+t>=e-l))return[2];w=!0,null==T||T("loading"),b&&(E.style.pointerEvents="none"),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,i()];case 2:return r.sent()?(null==T||T("done"),setTimeout(function(){return null==T?void 0:T("idle")},y)):(x=!0,null==T||T("completed"),null==c||c()),[3,5];case 3:return o=r.sent(),null==S||S(o),null==T||T("idle"),[3,5];case 4:return b&&(E.style.pointerEvents=""),w=!1,[7];case 5:return[2]}})})},onDestroy:function(){E=null,w=!1,x=!1,T=null}}},q=function(e){var t=e.state,o=e.loadingContent,r=e.loadDoneContent;return"loading"===t?n.createElement("div",{className:"ps-scrollbar-ptr-loader"},o):"done"===t?n.createElement("div",{className:"ps-scrollbar-ptr-done"},r):n.createElement("div",{className:"ps-scrollbar-ptr-placeholder"})},C=function(e){var r,l=e.threshold,i=void 0===l?60:l,c=e.onRefresh,a=e.loadingContent,d=void 0===a?n.createElement(n.Fragment,null,"🔄 Loading..."):a,v=e.loadDoneContent,f=void 0===v?n.createElement(n.Fragment,null,"✅ Done!"):v,h=e.doneDuration,p=void 0===h?1e3:h,m=e.lockScrollWhileLoading,y=void 0===m||m,g=null,b=null,S=!1,E=0,w=0,x=function(){b&&(b.style.transition="transform 0.3s",b.style.transform="translateY(0)",setTimeout(function(){return b.style.transition=""},300)),w=0,null==r||r("idle")},T=function(n){g&&!S&&(E="touches"in n?n.touches[0].clientY:n.clientY)},L=function(n){if(g&&b&&!S){var e=("touches"in n?n.touches[0].clientY:n.clientY)-E;e>0&&g.scrollTop<=0&&(n.preventDefault(),w=.5*e,b.style.transform="translateY(".concat(w,"px)"))}},A=function(){return u(void 0,void 0,void 0,function(){var n;return s(this,function(e){switch(e.label){case 0:if(!g||!b)return[2];if(n=i<1?g.clientHeight*i:i,!(w>=n)||S)return[3,5];S=!0,y&&(g.style.pointerEvents="none"),b.style.transition="transform 0.3s",b.style.transform="translateY(".concat(n,"px)"),null==r||r("loading"),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,c()];case 2:return e.sent(),null==r||r("done"),[3,4];case 3:return setTimeout(function(){x(),y&&(g.style.pointerEvents=""),S=!1},p),[7];case 4:return[3,6];case 5:x(),e.label=6;case 6:return[2]}})})},H=function(){var e=t("idle"),l=e[0],i=e[1];return o(function(){return r=i,function(){r=void 0}},[]),n.createElement("div",{className:"ps-scrollbar-ptr",style:{textAlign:"center",height:40}},n.createElement(q,{state:l,loadingContent:d,loadDoneContent:f}))};return{mountPosition:"before",render:function(){return n.createElement(H,null)},onInit:function(n,e){g=e,b=e.querySelector(".scroll-content"),g.addEventListener("touchstart",T,{passive:!1}),g.addEventListener("touchmove",L,{passive:!1}),g.addEventListener("touchend",A),g.addEventListener("mousedown",T),g.addEventListener("mousemove",L),g.addEventListener("mouseup",A)},onScroll:function(){!S&&g&&g.scrollTop>0&&w>0&&x()},onDestroy:function(){g&&(g.removeEventListener("touchstart",T),g.removeEventListener("touchmove",L),g.removeEventListener("touchend",A),g.removeEventListener("mousedown",T),g.removeEventListener("mousemove",L),g.removeEventListener("mouseup",A),g=null,b=null,w=0,S=!1)}}},O=function(n){var e=void 0===n?{}:n,t=e.threshold,o=void 0===t?.9:t,r=e.callbacks,l=void 0===r?{}:r;return{onScroll:function(n){var e,t;n.scrollTop<=0&&(null===(e=null==l?void 0:l.onTop)||void 0===e||e.call(l)),(o<1?n.scrollTop+n.clientHeight>=n.scrollHeight*o:n.scrollTop+n.clientHeight>=n.scrollHeight-o)&&(null===(t=null==l?void 0:l.onBottom)||void 0===t||t.call(l))}}},j=function(n){var e=void 0===n?{}:n,t=e.itemSelector,o=void 0===t?"div":t,r=e.snapDelay,l=void 0===r?100:r,i=null;return{onScroll:function(n){i&&clearTimeout(i),i=window.setTimeout(function(){!function(n){var e=Array.from(n.querySelectorAll(o));if(e.length){var t=n.scrollTop,r=e.reduce(function(n,e){return Math.abs(e.offsetTop-t)<Math.abs(n.offsetTop-t)?e:n});r&&h(n,r.offsetTop,{duration:200})}}(n)},l)},onDestroy:function(){i&&clearTimeout(i)}}},z=function(n){var e=void 0===n?{}:n,t=e.leftColumns,o=void 0===t?0:t,r=e.rightColumns,l=void 0===r?0:r,i=e.zIndex,c=void 0===i?10:i,a=e.background,u=void 0===a?"#fff":a,s=null;return{onInit:function(n,e){s=e.querySelector("table"),function(){if(s){for(var n=Array.from(s.querySelectorAll("thead th")),e=Array.from(s.querySelectorAll("tbody tr")),t=n.map(function(n){return n.getBoundingClientRect().width}),r=function(o){var r=n[o],l=t.slice(0,o).reduce(function(n,e){return n+e},0);r.style.position="sticky",r.style.left=l+"px",r.style.zIndex=c.toString(),r.style.background=u,e.forEach(function(n){var e=n.children[o];e.style.position="sticky",e.style.left=l+"px",e.style.zIndex=(c-1).toString(),e.style.background=u})},i=0;i<o;i++)r(i);var a=function(o){var r=n.length-1-o,l=n[r],i=t.slice(r+1).reduce(function(n,e){return n+e},0);l.style.position="sticky",l.style.right=i+"px",l.style.zIndex=c.toString(),l.style.background=u,e.forEach(function(n){var e=n.children[r];e.style.position="sticky",e.style.right=i+"px",e.style.zIndex=(c-1).toString(),e.style.background=u})};for(i=0;i<l;i++)a(i)}}()},onDestroy:function(){s&&(Array.from(s.querySelectorAll("th, td")).forEach(function(n){n.style.position="",n.style.left="",n.style.right="",n.style.zIndex="",n.style.background=""}),s=null)}}},N=function(n){var e=void 0===n?{}:n,t=e.zIndex,o=void 0===t?10:t,r=e.background,l=void 0===r?"#fff":r,i=null;return{onInit:function(n,e){(i=e.querySelector("thead"))&&(i.style.position="sticky",i.style.top="0",i.style.zIndex=o.toString(),i.style.background=l)},onDestroy:function(){i&&(i.style.position="",i.style.top="",i.style.zIndex="",i.style.background=""),i=null}}};export{q as PullToRefresh,h as animateScrollTo,p as animateScrollToX,b as appendDimension,S as appendEventListener,M as bounceEffectPlugin,R as bounceHighlightPlugin,T as calculatorRealSize,m as callPlugins,E as clearEventListener,y as createScrollbarApi,H as default,L as find1stLevel,w as findTargetTable,k as gradientIndicatorPlugin,F as highlightItemPlugin,D as inertiaPlugin,I as loadMorePlugin,x as psHtmlListSize,C as pullToRefreshPlugin,O as scrollSpyPlugin,j as snapToItemPlugin,d as startMomentumScroll,z as stickyColumnsPlugin,N as stickyHeaderPlugin,A as useScrollbarCore};
